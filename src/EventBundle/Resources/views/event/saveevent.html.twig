{% extends 'base.html.twig' %}

{% block content %}
    <div class="container">
        <div class="row" style="margin-top: 40px; margin-bottom: 50px">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <style>
                    .cont {
                        background: rgba(19, 35, 47, 0.9);
                        padding: 40px;
                        max-width: 600px;
                        margin: 40px auto;
                        border-radius: 4px;
                        box-shadow: 0 4px 10px 4px rgba(19, 35, 47, 0.3);
                    }
                    *, *:before, *:after {
                        box-sizing: border-box;
                    }


                    body {
                        background: url('{{ asset('images/796238-events-lights.jpg') }}');
                        font-family: 'Titillium Web', sans-serif;
                        background-repeat: no-repeat;
                        background-size: 1730px 763px;
                    }

                    a {
                        text-decoration: none;
                        color: #1ab188;
                        transition: .5s ease;
                    }
                    .table .thead-light th {
                        color: #495057;
                        background-color: #e9ecef00;
                        border-color: #dee2e6;
                    }
                    .btn-danger{
                        color: #fff;
                        background-color: sienna;
                        border-color: transparent;
                    }
                    .form {
                        background: #ffc48dc2;
                        padding: 40px;
                        max-width: 600px;
                        margin: 40px auto;
                        border-radius: 4px;
                        box-shadow: 0 4px 10px 4px rgba(19, 35, 47, 0.3);
                    }
                    a:hover {
                        color: #179b77;
                    }
                    .tab-group {
                        list-style: none;
                        padding: 0;
                        margin: 0 0 40px 0;
                    }
                    .tab-group:after {
                        content: "";
                        display: table;
                        clear: both;
                    }
                    .tab-group li a {
                        display: block;
                        text-decoration: none;
                        padding: 15px;
                        background: rgba(76, 80, 80, 0.25);
                        color: #FFFFFF;
                        font-size: 20px;
                        float: left;
                        width: 50%;
                        text-align: center;
                        cursor: pointer;
                        transition: .5s ease;
                    }
                    .tab-group li a:hover {
                        background: #c76c1a;
                        color: #ffffff;
                    }
                    .tab-group .active a {
                        background: #f2994a;
                        color: #ffffff;
                    }

                    .tab-content > div:last-child {
                        display: none;
                    }

                    h1 {
                        text-align: center;
                        color: #ffffff;
                        font-weight: 300;
                        margin: 0 0 40px;
                    }

                    label {
                        position: absolute;
                        -webkit-transform: translateY(6px);
                        transform: translateY(6px);
                        left: 13px;
                        color: rgba(255, 255, 255, 0.5);
                        transition: all 0.25s ease;
                        -webkit-backface-visibility: hidden;
                        pointer-events: none;
                        font-size: 22px;
                    }
                    label .req {
                        margin: 2px;
                        color: #1ab188;
                    }

                    label.active {
                        -webkit-transform: translateY(50px);
                        transform: translateY(50px);
                        left: 2px;
                        font-size: 14px;
                    }
                    label.active .req {
                        opacity: 0;
                    }

                    label.highlight {
                        color: #ffffff;
                    }

                    input, textarea {
                        font-size: 22px;
                        display: block;
                        width: 100%;
                        height: 100%;
                        padding: 5px 10px;
                        background: none;
                        background-image: none;
                        border: 1px solid #a0b3b0;
                        color: #ffffff;
                        border-radius: 0;
                        transition: border-color .25s ease, box-shadow .25s ease;
                    }
                    input:focus, textarea:focus {
                        outline: 0;
                        border-color: #1ab188;
                    }

                    textarea {
                        border: 2px solid #a0b3b0;
                        resize: vertical;
                    }

                    .field-wrap {
                        position: relative;
                        margin-bottom: 40px;
                    }

                    .top-row:after {
                        content: "";
                        display: table;
                        clear: both;
                    }
                    .top-row > div {
                        float: left;
                        width: 48%;
                        margin-right: 4%;
                    }
                    .top-row > div:last-child {
                        margin: 0;
                    }

                    .button {
                        border: 0;
                        outline: none;
                        border-radius: 0;
                        padding: 15px 0;
                        font-size: 2rem;
                        font-weight: 600;
                        text-transform: uppercase;
                        letter-spacing: .1em;
                        background: #1ab188;
                        color: #ffffff;
                        transition: all 0.5s ease;
                        -webkit-appearance: none;
                    }
                    .button:hover, .button:focus {
                        background: #179b77;
                    }

                    .button-block {
                        display: block;
                        width: 100%;
                    }

                </style>
                <h1 style="margin-bottom: 20px; text-align: center; color: #fbd55c; font-size: 50px; font-family: cursive; font-weight: 600; text-shadow: 1px 4px 10px #ff8100;">
                    My Events
                </h1>
                <div class="form">

                    <ul class="tab-group">
                        <li class="tab active"><a href="#new">Still to come</a></li>
                        <li class="tab"><a href="#old">Finished</a></li>
                    </ul>

                    <div class="tab-content">
                        <div id="new">
                            {% if events %}
                                <table class="table table-striped" id="new">
                                    <thead>
                                    <tr>
                                        <th scope="col">Event</th>
                                        <!--th scope="col"><i class="fa fa-calendar"></i> Date</th-->
                                        <th scope="col"><a class="fa fa-dollar"></a> Price</th>
                                        <th scope="col"><a class="fa fa-dollar"></a> Place</th>
                                        <th scope="col"></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for i in events %}
                                        <tr>
                                            <td>{{ i.nomevent }}</td>
                                            <!--td> i.dateevent }}</td-->
                                            <td><a class="fa fa-dollar"></a> {{ i.ticketprice }}</td>
                                            <td><a class="fa fa-dollar"></a> {{ i.lieuevent }}</td>
                                            <!--td style="align-content: center"><input class="btn btn-danger" type="button" data-toggle="modal" data-target="#myModal i.idevent }}" value="Cancel"></td-->

                                            <td>
                                                <a href="{{ path('event_cancel',{'idevent':i.idevent}) }}">CANCEL</a>
                                                    <!--li><input type="submit" value="cancel" ></li-->



                                            </td>

                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                                {% for i in events %}
                                    <div id="myModal{{ i.idevent }}" class="modal fade" role="dialog">
                                        <div class="modal-dialog">

                                            <!-- Modal content-->
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h4 class="modal-title"> Forget </h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>

                                                </div>
                                                <div class="modal-body">
                                                    <h4 style="color: red;">Are you sure you want to forget this event?</h4>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal"> Cancel </button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <p>You have no events</p>
                            {% endif %}
                        </div>

                        <div id="old">
                            {% if old %}
                                <table class="table table-striped" id="old">
                                    <thead class="thead-light">
                                    <tr>
                                        <th scope="col">Event</th>
                                        <!--th scope="col">Date</th-->
                                        <th scope="col">Price</th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% for i in old %}
                                        <tr>
                                            <td>{{ i.nomevent}}</td>
                                            <!--td> i.dateevent}}</td-->
                                            <td><a class="fa fa-dollar"></a> {{ i.ticketprice}}</td>
                                            <td><a class="fa fa-dollar"></a> {{ i.lieuevent}}</td>
                                            <td><a href="{{ path('event_getEvent',{'idevent':i.idevent}) }}"></a></td>
                                        </tr>
                                    {% endfor %}

                                    </tbody>
                                </table>
                            {% else %}
                                <p>You have no events</p>
                            {% endif %}
                        </div>

                    </div><!-- tab-content -->

                </div> <!-- /form -->

            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script>
        $('.form').find('input, textarea').on('keyup blur focus', function (e) {

            var $this = $(this),
                label = $this.prev('label');

            if (e.type === 'keyup') {
                if ($this.val() === '') {
                    label.removeClass('active highlight');
                } else {
                    label.addClass('active highlight');
                }
            } else if (e.type === 'blur') {
                if( $this.val() === '' ) {
                    label.removeClass('active highlight');
                } else {
                    label.removeClass('highlight');
                }
            } else if (e.type === 'focus') {

                if( $this.val() === '' ) {
                    label.removeClass('highlight');
                }
                else if( $this.val() !== '' ) {
                    label.addClass('highlight');
                }
            }

        });

        $('.tab a').on('click', function (e) {

            e.preventDefault();

            $(this).parent().addClass('active');
            $(this).parent().siblings().removeClass('active');

            target = $(this).attr('href');

            $('.tab-content > div').not(target).hide();

            $(target).fadeIn(600);

        });
    </script>

{% endblock %}
