{% extends 'dashbase.html.twig'  %}
{% block nav %}

    <div class="sidebar-wrapper">
        <ul class="nav">
            <li class="nav-item  ">
                <a class="nav-link" href="{{ asset('categorie') }}">
                    <i class="material-icons">person</i>
                    <p>Categories</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{ asset('produit') }}">
                    <i class="material-icons">content_paste</i>
                    <p>Products</p>
                </a>
            </li>
            <li class="nav-item active ">
                <a class="nav-link" href="{{ asset('promo') }}">
                    <i class="material-icons">library_books</i>
                    <p>Promo</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{path('show_commandes')}}">
                    <i class="material-icons">bubble_chart</i>
                    <p>Commandes</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{ asset('event') }}">
                    <i class="material-icons">bubble_chart</i>
                    <p>Events</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{ path('velo_index') }}">
                    <i class="material-icons">location_ons</i>
                    <p>Velos</p>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ path('facture_index') }}">
                    <i class="material-icons">person</i>
                    <p>Bills</p>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ path('veloR_index') }}">
                    <i class="material-icons">content_paste</i>
                    <p>Broken Bikes</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{ path('reparateur_index') }}">
                    <i class="material-icons">library_books</i>
                    <p>Repairers</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{ path('location_index1') }}">
                    <i class="material-icons">location_ons</i>
                    <p>location</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{  path('listeu') }}">
                    <i class="material-icons">Consulter les articles</i>
                    <p>Consulter les articles</p>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="{{  path('addu') }}">
                    <i class="material-icons">Ajouter Article</i>
                    <p>Ajouter Article</p>
                </a>
            </li>
        </ul>

    </div>
{% endblock %}


{% block content %}
    <style>
        .buttonx {
            display: inline-block;
            padding: 8px 16px;
            font-size: 12px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            outline: none;
            color: #fff;
            background-color: #4CAF50;
            border: none;
            border-radius: 15px;
            size: 10px;
        }

        .buttonx:hover {background-color: #3e8e41}

        .buttonx:active {
            background-color: #3e8e41;
            box-shadow: 0 5px #666;
            transform: translateY(4px);
        }
    </style>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script>
        $(document).ready(function () {

            $('.star').on('click', function () {
                $(this).toggleClass('star-checked');
            });

            $('.ckbox label').on('click', function () {
                $(this).parents('tr').toggleClass('selected');
            });

            $('.btn-filter').on('click', function () {
                var $target = $(this).data('target');
                if ($target != 'all') {
                    $('.table tr').css('display', 'none');
                    $('.table tr[data-status="head"]').fadeIn('slow');
                    $('.table tr[data-status="' + $target + '"]').fadeIn('slow');
                } else {
                    $('.table tr').css('display', 'none').fadeIn('slow');
                }
            });

        });


    </script>
    <script>
        $(document).ready(function() {
            var activeSystemClass = $('.list-group-item.active');

            //something is entered in search form
            $('#system-search').keyup( function() {
                var that = this;
                // affect all table rows on in systems table
                var tableBody = $('.table-list-search tbody');
                var tableRowsClass = $('.table-list-search tbody tr');
                $('.search-sf').remove();
                tableRowsClass.each( function(i, val) {

                    //Lower text for case insensitive
                    var rowText = $(val).text().toLowerCase();
                    var inputText = $(that).val().toLowerCase();
                    if(inputText != '')
                    {
                        $('.search-query-sf').remove();
                        tableBody.prepend('<tr class="search-query-sf"><td colspan="6"><strong>Searching for: "'
                            + $(that).val()
                            + '"</strong></td></tr>');
                    }
                    else
                    {
                        $('.search-query-sf').remove();
                    }

                    if( rowText.indexOf( inputText ) == -1 )
                    {
                        //hide rows
                        tableRowsClass.eq(i).hide();

                    }
                    else
                    {
                        $('.search-sf').remove();
                        tableRowsClass.eq(i).show();
                    }
                });
                //all tr elements are hidden
                if(tableRowsClass.children(':visible').length == 0)
                {
                    tableBody.append('<tr class="search-sf"><td class="text-muted" colspan="6">No entries found.</td></tr>');
                }
            });
        });
    </script>


    <h1>Promos list</h1>

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title ">Products</h4>
                        <p class="card-category">This is your products list</p>
                        <div class="col-md-3">
                            <form action="#" method="get">
                                <div class="input-group">
                                    <!-- USE TWITTER TYPEAHEAD JSON WITH API TO SEARCH -->
                                    <input class="form-control" id="system-search" name="q" placeholder="Search for" required>
                                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></button>
                    </span>
                                </div>
                            </form>
                        </div>
                        <div align="right">
                            <button type="button" class="btn btn-info btn-filter buttonx" data-target="all">All</button>
                        <button type="button" class="btn btn-success btn-filter buttonx" data-target="Already">Already Started</button>
                            <button type="button" class="btn btn-warning btn-filter buttonx" data-target="NotYet">Not started Yet </button>

                        </div>
                    </div>

                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-list-search">
                                <thead class=" text-primary">

            <tr data-status="head">
                <th>Id</th>
                <th>Titre</th>
                <th>Product</th>
                <th>Description</th>
                <th>Datedebut</th>
                <th>Datefin</th>
                <th>Remise</th>
                <th>New Price</th>
                <th>Quantite</th>
                <th>Actions</th>
            </tr>

        </thead>
        <tbody>

        {% for promo in promos %}
            {% if promo.dateDebut > time %}
            <tr data-status="NotYet">
                <td><a href="{{ path('promo_show', { 'id': promo.id }) }}">{{ promo.id }}</a></td>
                <td>{{ promo.titre }}</td>
                <td><a href="{{ path('produit_show', { 'id': promo.produit.id }) }}">{{ promo.produit.nom }}</a></td>
                <td>{{ promo.description }}</td>
                <td>{% if promo.dateDebut %}{{ promo.dateDebut|date('Y-m-d') }}{% endif %}</td>
                <td>{% if promo.dateFin %}{{ promo.dateFin|date('Y-m-d') }}{% endif %}</td>
                <td>{{ promo.remise }}</td>
                <td>{{ promo.newPrix }}</td>
                <td>{{ promo.quantite }}</td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('promo_show', { 'id': promo.id }) }}"><img src="{{ asset('images/eye.png') }}" width="30" height="30"  alt="edit"></a>
                        </li>
                        <li>
                            <a href="{{ path('promo_edit', { 'id': promo.id }) }}"><img src="{{ asset('images/update.png') }}" width="30" height="30"></a>
                        </li>

                    </ul>
                </td>
            </tr>
            {% elseif promo.dateDebut <= time %}
            <tr data-status="Already">
                <td><a href="{{ path('promo_show', { 'id': promo.id }) }}">{{ promo.id }}</a></td>
                <td>{{ promo.titre }}</td>
                <td><a href="{{ path('produit_show', { 'id': promo.produit.id }) }}">{{ promo.produit.nom }}</a></td>
                <td>{{ promo.description }}</td>
                <td>{% if promo.dateDebut %}{{ promo.dateDebut|date('Y-m-d') }}{% endif %}</td>
                <td>{% if promo.dateFin %}{{ promo.dateFin|date('Y-m-d') }}{% endif %}</td>
                <td>{{ promo.remise }}</td>
                <td>{{ promo.newPrix }}</td>
                <td>{{ promo.quantite }}</td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('promo_show', { 'id': promo.id }) }}"><img src="{{ asset('images/eye.png') }}" width="30" height="30"></a>
                        </li>
                        <li>
                            <a href="{{ path('promo_edit', { 'id': promo.id }) }}"><img src="{{ asset('images/update.png') }}" width="30" height="30"></a>
                        </li>
                    </ul>
                </td>
            </tr>
            {% else %}
            <tr data-status="all">
                <td><a href="{{ path('promo_show', { 'id': promo.id }) }}">{{ promo.id }}</a></td>
                <td>{{ promo.titre }}</td>
                <td><a href="{{ path('produit_show', { 'id': promo.produit.id }) }}">{{ promo.produit.nom }}</a></td>
                <td>{{ promo.description }}</td>
                <td>{% if promo.dateDebut %}{{ promo.dateDebut|date('Y-m-d') }}{% endif %}</td>
                <td>{% if promo.dateFin %}{{ promo.dateFin|date('Y-m-d') }}{% endif %}</td>
                <td>{{ promo.remise }}</td>
                <td>{{ promo.newPrix }}</td>
                <td>{{ promo.quantite }}</td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('promo_show', { 'id': promo.id }) }}"><img src="{{ asset('images/eye.png') }}" width="30" height="30"></a>
                        </li>
                        <li>
                            <a href="{{ path('promo_edit', { 'id': promo.id }) }}"><img src="{{ asset('images/update.png') }}" width="30" height="30"></a>
                        </li>
                    </ul>
                </td>
            </tr>
            {% endif %}
        {% endfor %}
        </tbody>
    </table>
<center>
    <ul>
        <li>
            <a href="{{ path('promo_new') }}"><img src="{{ asset('images/new.png') }}" width="120" height="80"></a>
        </li>
    </ul>
</center>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
